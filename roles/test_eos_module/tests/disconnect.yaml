---
- debug: msg="START disconnect.yaml"

- name: CLI disconnect test
  eos_test:
      test: disconnect
      provider: "{{ cli }}"
  register: result
  ignore_errors: yes

- assert:
    that:
      - "result.failed == true"
      - "result.msg == 'problem sending command to host: Socket is closed'"

- name: EAPI disconnect test
  eos_test:
      test: disconnect
      provider: "{{ eapi }}"
  register: result
  ignore_errors: yes

- assert:
    that:
      - "result.failed == true"
      - "result.msg == 'Not connected to endpoint.'"

- debug: msg="END disconnect.yaml"
