---
- debug: msg="START get_config.yaml"

- name: setup test
  eos_config:
      lines: ['hostname foo']
      provider: "{{ cli }}"

- name: config test (CLI)
  eos_test:
      test: get_config
      provider: "{{ cli }}"
  register: result
- assert:
    that:
        - "'! device: foo' in result.output"

- name: config test (EAPIT)
  eos_test:
      test: get_config
      provider: "{{ eapi }}"
  register: result
- assert:
    that:
        - "'! device: foo' in result.output.output"

- name: teardown test
  eos_config:
      lines: ['hostname {{ inventory_hostname }}']
      provider: "{{ cli }}"

- debug: msg="END get_config.yaml"
